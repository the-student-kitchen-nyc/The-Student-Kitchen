<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Impact - The Student Kitchen</title>
    <!-- ========== MODIFY IMAGE HERE: favicon.ico ========== -->
    <link rel="icon" type="image/x-icon" href="favicon.ico?v=2">
    <!-- ====================================== -->
    <!-- ========== MODIFY IMAGE HERE: favicon-16x16.png ========== -->
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png?v=2">
    <!-- =========================================== -->
    <!-- ========== MODIFY IMAGE HERE: favicon-32x32.png ========== -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png?v=2">
    <!-- =========================================== -->
    <!-- ========== MODIFY IMAGE HERE: apple-touch-icon.png ========== -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png?v=2">
    <!-- ============================================== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=New+Spirit:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">    
    <script src="search-index.js"></script>
    <script src="search.js"></script>
</head>
<body>

    <div id="header"></div>

    <main>
        <section class="hero programs-hero">
            <div class="hero-programs-container">
                <h2>Community Impact</h2>
                <p>Check out our recent and ongoing partnerships for both 
                    community engagement and student cooking classes.</p>
            </div>
        </section>
        
        <section class="carousel-section animate-on-scroll">
            <div class="carousel">
                <button class="arrow prev" aria-label="Previous">‹</button>
                <div class="carousel-wrapper">
                    <div class="carousel-track">
                        <div class="card">
                            <img src="assets/AAFE-class-intro.JPG" alt="Students in kitchen" />
                        </div>
                        <div class="card">
                            <!-- ========== MODIFY IMAGE HERE: assets/students2.png ========== -->
                            <img src="assets/ben.png" alt="Student cooking" />
                            <!-- ============================================== -->
                        </div>
                        <div class="card">
                            <img src="assets/tortillas.png" alt="Student working" />
                        </div>
                        <div class="card">
                            <!-- ========== MODIFY IMAGE HERE: assets/students4.png ========== -->
                            <img src="assets/students4.png" alt="Students in kitchen" />
                            <!-- ============================================== -->
                        </div>
                        <div class="card">
                            <!-- ========== MODIFY IMAGE HERE: assets/ben.png ========== -->
                            <img src="assets/nyt-cooking.png" alt="Student cooking" />
                            <!-- ========================================= -->
                        </div>
                        <div class="card">
                            <!-- ========== MODIFY IMAGE HERE: assets/image5.png ========== -->
                            <img src="assets/image5.png" alt="Student working" />
                            <!-- =========================================== -->
                        </div>
                    </div>
                </div>
                <button class="arrow next" aria-label="Next">›</button>
            </div>
        </section>
        
        <section class="statistics-section animate-on-scroll">
            <div class="statistics-container">
                <div class="stat-item">
                    <div class="stat-icon-wrapper">
                        <!-- ========== MODIFY IMAGE HERE: assets/building-icon.png ========== -->
                        <img src="assets/building-icon.png" alt="Building Icon" class="header-logo">
                        <!-- ================================================== -->
                    </div>
                    <p class="stat-text">18 School, community, and nonprofit partners in 2025</p>
                </div>

                <div class="stat-item">
                    <div class="stat-icon-wrapper">
                        <!-- ========== MODIFY IMAGE HERE: assets/people-icon.png ========== -->
                        <img src="assets/people-icon.png" alt="People Icon" class="header-logo">
                        <!-- ================================================ -->
                    </div>
                    <p class="stat-text">6 afterschool workshop series in 2025 </p>
                </div>
                <div class="stat-item">
                    <div class="stat-icon-wrapper">
                        <!-- ========== MODIFY IMAGE HERE: assets/pot.png ========== -->
                        <img src="assets/pot.png" alt="pot Icon" class="header-logo">
                        <!-- ========================================== -->
                    </div>
                    <p class="stat-text">Over 40 workshops held in 2025</p>
                </div>
            </div>
        </section>

        <section class="partners animate-on-scroll">
            <div class="map-container">
                <div class="map-stage">
                  <!-- ========== MODIFY IMAGE HERE: assets/map.png ========== -->
                  <img src="assets/map.png" alt="Map of New York" class="map" />
                  <!-- ========================================== -->
              
                  <!-- ========== MODIFY PARTNER LOCATIONS HERE: assets/pin.png (multiple instances) ========== -->
                   <!-- Play with the percentages to change the location of the pins. Top is vertical, left is horizontal.-->
                  <!--The data-location thing here corresponds to the "const partners" thing below, in terms of the numbering.-->
                  <div class="map-pin" data-location="0" style="top: 4%; left: 61%;">
                    <img src="assets/pin.png" alt="Location pin" />
                  </div>
                    <div class="map-pin" data-location="1" style="top: 9%; left: 58%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="2" style="top: 5%; left: 75%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="3" style="top: 17%; left: 62%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    
                    <div class="map-pin" data-location="4" style="top: 53%; left: 36%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="5" style="top: 74%; left: 39%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="6" style="top: 58%; left: 86%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    
                    <div class="map-pin" data-location="7" style="top: 89%; left: 50%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="8" style="top: 82%; left: 41%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="9" style="top: 84%; left: 50%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="10" style="top: 84%; left: 60%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="11" style="top: 86%; left: 55%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <div class="map-pin" data-location="12" style="top: 89%; left: 60%;">
                        <img src="assets/pin.png" alt="Location pin" />
                    </div>
                    <!-- ============================================================= -->
                </div>

                    
                <div class="map-popup" id="popup">
                    <div class="popup-header">
                      <button class="close" id="closeBtn">×</button>
                    </div>
                    <button class="nav-arrow nav-arrow-left" id="prevBtn">‹</button>
                    <button class="nav-arrow nav-arrow-right" id="nextBtn">›</button>
                
                    <div class="popup-content">
                      <div class="popup-icon">
                        <!-- ========== MODIFY IMAGE HERE: assets/people.png (dynamic partner icons) ========== -->
                        <img id="partnerIcon" src="assets/people.png" alt="Partner logo" />
                        <!-- ================================================================== -->
                      </div>
                      <h3 id="partnerName">Plaza Proletaria</h3>
                      <p id="partnerDescription">...</p>
                      <a href="#" id="siteLink" class="site-btn" target="_blank" rel="noopener noreferrer">VISIT WEBSITE</a>
                    </div>
                  </div>
                </div>
            </div>
        </section>
        
        <section class="partner-logos-section animate-on-scroll">
            <div class="partner-logos-carousel">
                <div class="logos-track">
                    <!-- ========== MODIFY IMAGE HERE: assets/logos1.png ========== -->
                    <img src="assets/logos1.png" alt="Partner logos row 1" />
                    <!-- ============================================ -->
                    <!-- ========== MODIFY IMAGE HERE: assets/logo2.png ========== -->
                    <img src="assets/logo2.png" alt="Partner logos row 2" />
                    <!-- =========================================== -->
                    <!-- ========== MODIFY IMAGE HERE: assets/logo3.png ========== -->
                    <img src="assets/logo3.png" alt="Partner logos row 3" />
                    <!-- =========================================== -->
                    <!-- ========== MODIFY IMAGE HERE: assets/logos1.png ========== -->
                    <img src="assets/logos1.png" alt="Partner logos row 1" />
                    <!-- ============================================ -->
                    <!-- ========== MODIFY IMAGE HERE: assets/logo2.png ========== -->
                    <img src="assets/logo2.png" alt="Partner logos row 2" />
                    <!-- =========================================== -->
                    <!-- ========== MODIFY IMAGE HERE: assets/logo3.png ========== -->
                    <img src="assets/logo3.png" alt="Partner logos row 3" />
                    <!-- =========================================== -->
                </div>
            </div>
        </section>
    </main>

    <div id="footer"></div>

    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header').innerHTML = data;
                // Mark active navigation link
                const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                const navLinks = document.querySelectorAll('.main-nav a');
                navLinks.forEach(link => {
                    const linkPage = link.getAttribute('href');
                    // Match if current page matches link, or if on root/home page
                    if (linkPage === currentPage || 
                        (currentPage === '' && linkPage === 'index.html') ||
                        (currentPage === 'index.html' && linkPage === 'index.html')) {
                        link.parentElement.classList.add('active');
                    }
                });
                
                // Navbar hide/show on scroll
                let lastScrollTop = 0;
                const header = document.querySelector('.site-header');
                let ticking = false;
                
                function updateHeader() {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    
                    if (scrollTop > 100) { // Only hide after scrolling down 100px
                        if (scrollTop > lastScrollTop + 5) {
                            // Scrolling down (with threshold to prevent flickering)
                            header.classList.add('hidden');
                        } else if (scrollTop < lastScrollTop - 5) {
                            // Scrolling up (with threshold to prevent flickering)
                            header.classList.remove('hidden');
                        }
                    } else {
                        // At the top, always show
                        header.classList.remove('hidden');
                    }
                    
                    lastScrollTop = scrollTop;
                    ticking = false;
                }
                
                window.addEventListener('scroll', function() {
                    if (!ticking) {
                        window.requestAnimationFrame(updateHeader);
                        ticking = true;
                    }
                });
                
                // Initialize search functionality
                initSearch();
            });
        
        fetch('footer.html')
            .then(response => response.text())
            .then(data => document.getElementById('footer').innerHTML = data);
    </script>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing map interactions...');
            
            /* ========== MODIFY PARTNERS HERE: Partner icon references in JavaScript ========== */
            /* Add partners here. The ordering matters so it can correspond to the pins above with the data-location variable.*/
            const partners = [
                {
                    name: "Art for Aid",
                    description: "Art For AID is more than any one individual. It is made up of a small core of dedicated folks, who help each week at the Riverdale Y Sunday Market, plus a corp of ever-changing volunteers, friends and like-minded organizations. A caring community! Here's some we'd like to highlight. Cheers!",
                    icon: "assets/artforaid.png", /* ========== MODIFY IMAGE HERE: assets/artforaid.png ========== */
                    website: "https://www.artforaid.info/"
                },
                {
                    name: "In-Tech Academy",
                    description: "IN-Tech Academy MS/HS 368 serves grades 6 through 12.  We offer tailored instruction to our middle schoolers, building on strong learning habits, focusing on literacy, technology and core content.",
                    icon: "assets/intech.png", /* ========== MODIFY IMAGE HERE: assets/intech.png ========== */
                    website: "https://www.in-techacademy.org/"
                },
                {
                    name: "High School for the Visual Arts",
                    description: "Our mission is to inspire every student to PROSPER academically and personally in our arts-focused, inclusive community. As a Future Ready NYC school, we equip students with real-world experiences and skills that prepare them for college, career, and beyond—including opportunities to earn industry-based credentials in areas such as digital arts, media production, and business and marketing. We champion creativity, artistic expression, teamwork, and continuous improvement.",
                    icon: "assets/highschoolforarts.png", /* ========== MODIFY IMAGE HERE: assets/highschoolforarts.png ========== */
                    website: "https://www.schools.nyc.gov/schools/X418"
                },
                {
                    name: "Harriet Tubman Charter School",
                    description: "The Harriet Tubman Charter School is committed to helping each child develop to his or her full potential. We recognize that all human beings are endowed with unique talents and gifts, and we believe that the process of schooling should lead each student to the realization, development, and expression of his or her potential.",
                    icon: "assets/harriet.png", /* ========== MODIFY IMAGE HERE: assets/harriet.png ========== */
                    website: "https://www.htcsbronx.org/"
                },
                {
                    name: "Plaza Proletaria",
                    description: "We’re united by a working-class fraternity & the understanding of the need to fight together and cooperate to pave the road towards a socialist world.",
                    icon: "assets/plaza.png", /* ========== MODIFY IMAGE HERE: assets/plaza.png ========== */
                    website: "https://www.instagram.com/plazaproletaria/?hl=en"
                },
                {
                    name: "Loisada",
                    description: "Loisaida Inc. Center, is an accessible multidisciplinary project space, hosting residencies, internships, providing resources and opportunities for underrepresented and emerging artists, cultural workers, collectives and creators working in diverse disciplines.",
                    icon: "assets/loisada.png", /* ========== MODIFY IMAGE HERE: assets/loisada.png ========== */
                    website: "https://loisaida.org/"
                },
                {
                    name: "Asian Americans for Equity (AAFE)",
                    description: "Through community development, Asian Americans for Equality (AAFE) advances racial, social and economic justice for all, regardless of background, guided by our experiences as Asian Americans and our commitment to civil rights.",
                    icon: "assets/aafe.png", /* ========== MODIFY IMAGE HERE: assets/aafe.png ========== */
                    website: "https://www.aafe.org/"
                },
                {
                    name: "Collective Focus",
                    description: "Collective Focus is a Women, POC and LGBTQIA+ led organization fostering resourcefulness and empowerment at our Brooklyn-based Resource Hub. Our community-based approaches confront the challenges of food insecurity and food waste, racial and economic inequality & mental health by building access to food, clothing, creative and wellness.",
                    icon: "assets/collectivefocus.png", /* ========== MODIFY IMAGE HERE: assets/collectivefocus.png ========== */
                    website: "https://collectivefocus.site/"
                },
                {
                    name: "El Puente",
                    description: "El Puente is a human rights institution founded in 1982 with a mission to inspire and nurture leadership for peace and justice. Based in NYC and Puerto Rico with national and international impact, El Puente directly serves approximately 12,000 individuals annually from nine youth Leadership Centers across the Southside of Williamsburg and Bushwick, Brooklyn and Rio Piedras, Puerto Rico.",
                    icon: "assets/elpuente.png", /* ========== MODIFY IMAGE HERE: assets/elpuente.png ========== */
                    website: "https://www.elpuente.org/"
                },
                {
                    name: "Thirdspace",
                    description: "We are a nonprofit organization that exists to rebuild our social fabric by creating accessible public spaces where people can connect, belong, and contribute to their local communities.",
                    icon: "assets/thirdspace.png", /* ========== MODIFY IMAGE HERE: assets/thirdspace.png ========== */
                    website: "https://linktr.ee/thirdspacenyc"
                },
                {
                    name: "Bushwick Ayuda Mutua",
                    description: "Bushwick Ayuda Mutua is a space for short and long-term residents of Bushwick to create frameworks within our community that sustainably take care of the community. We strive to ensure that residents of our community have their most basic needs met, as well access to resources and information to thrive during COVID-19 pandemic and beyond. Currently, we serve Bushwick neighbors through the distribution of food, pantry items, and necessities like toilet paper, soap, diapers, and menstrual products.",
                    icon: "assets/bushwick.png", /* ========== MODIFY IMAGE HERE: assets/bushwick.png ========== */
                    website: "https://bushwickayudamutua.com/"
                },
                {
                    name: "BK Rot",
                    description: "BK ROT is a community centered, closed loop, fossil fuel free approach to hauling and composting food waste in NYC.",
                    icon: "assets/bkrot.png", /* ========== MODIFY IMAGE HERE: assets/bkrot.png ========== */
                    website: "https://www.bkrot.org/"
                },
                {
                    name: "MESA Charter High School",
                    description: "Math, Engineering, and Science Academy (MESA) Charter High School will provide a rigorous education that equips each student with the ability to succeed in life and in college. MESA students will develop a passion for science, technology, engineering and mathematics through an intensive college readiness program, develop critical thinking and self-advocacy.",
                    icon: "assets/mesa.png", /* ========== MODIFY IMAGE HERE: assets/mesa.png ========== */
                    website: "https://www.mesacharter.org/"
                }
            ];
            /* ===================================================================== */

            let currentLocation = 0;
            const popup = document.getElementById('popup');
            const closeBtn = document.getElementById('closeBtn');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const pins = document.querySelectorAll('.map-pin');

            console.log('Found', pins.length, 'pins');

            function updatePopup(index) {
                const partner = partners[index];
                document.getElementById('partnerName').textContent = partner.name;
                document.getElementById('partnerDescription').textContent = partner.description;
                document.getElementById('partnerIcon').src = partner.icon;
                document.getElementById('siteLink').href = partner.website;

                // Update active pin
                pins.forEach((pin, i) => {
                    pin.classList.toggle('active', i === index);
                });
            }

            function showPopup(index) {
                console.log('Showing popup for location', index);
                currentLocation = index;
                updatePopup(index);
                popup.classList.add('active');
            }

            function hidePopup() {
                console.log('Hiding popup');
                popup.classList.remove('active');
                pins.forEach(pin => pin.classList.remove('active'));
            }

            // Navigate to next location
            function nextLocation() {
                currentLocation = (currentLocation + 1) % partners.length;
                updatePopup(currentLocation);
            }

            // Navigate to previous location
            function prevLocation() {
                currentLocation = (currentLocation - 1 + partners.length) % partners.length;
                updatePopup(currentLocation);
            }

            pins.forEach((pin, index) => {
                pin.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showPopup(index);
                });
            });

            if (closeBtn) {
                closeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    hidePopup();
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    nextLocation();
                });
            }
            
            if (prevBtn) {
                prevBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    prevLocation();
                });
            }

            document.addEventListener('click', (e) => {
                const isClickInsidePopup = popup && popup.contains(e.target);
                const isClickOnPin = Array.from(pins).some(pin => pin.contains(e.target));
                
                if (!isClickInsidePopup && !isClickOnPin && popup && popup.classList.contains('active')) {
                    hidePopup();
                }
            });

            console.log('Map interactions initialized');

            showPopup(0);
        });
    </script>

    <!-- Carousel script -->
    <script>
        // Infinite Loop Carousel
        const carousel = document.querySelector('.carousel');
        const track = document.querySelector('.carousel-track');
        const prevButton = document.querySelector('.arrow.prev');
        const nextButton = document.querySelector('.arrow.next');
        
        const originalSlides = Array.from(track.querySelectorAll('.card'));
        const totalSlides = originalSlides.length;
        
        if (totalSlides === 0) {
            console.error('No slides found in carousel');
        } else {
            const firstCard = originalSlides[0];
            const cardHeight = firstCard.offsetHeight || 550;
            
            track.style.position = 'relative';
            track.style.width = '100%';
            track.style.height = cardHeight + 'px';
            track.style.display = 'block';
            track.style.minHeight = cardHeight + 'px';
            
            originalSlides.forEach((card, index) => {
                const carouselWidth = carousel.offsetWidth || window.innerWidth;
                const cardWidth = Math.min(carouselWidth * 0.75, 800);
                
                card.style.position = 'absolute';
                card.style.width = cardWidth + 'px';
                card.style.height = cardHeight + 'px';
                card.style.left = '50%';
                card.style.top = '0';
                card.style.marginLeft = (-cardWidth / 2) + 'px';
                card.style.transition = 'transform .4s ease, opacity .4s ease';
                card.style.cursor = 'pointer';
                card.style.opacity = '1';
                card.dataset.index = index;
            });
            
            let currentIndex = 0;
            let isTransitioning = false;
            
            function updateCarousel() {
                originalSlides.forEach((card, index) => {
                    let relativePosition = index - currentIndex;
                    
                    if (relativePosition > totalSlides / 2) {
                        relativePosition -= totalSlides;
                    } else if (relativePosition < -totalSlides / 2) {
                        relativePosition += totalSlides;
                    }
                    
                    if (relativePosition === 0) {
                        card.style.transform = 'translateX(0) scale(1)';
                        card.style.opacity = '1';
                        card.style.zIndex = '1';
                    } else if (relativePosition === 1) {
                        card.style.transform = 'translateX(40%) scale(0.8)';
                        card.style.opacity = '0.4';
                        card.style.zIndex = '0';
                    } else if (relativePosition === -1) {
                        card.style.transform = 'translateX(-40%) scale(0.8)';
                        card.style.opacity = '0.4';
                        card.style.zIndex = '0';
                    } else {
                        card.style.opacity = '0';
                        card.style.zIndex = '0';
                    }
                });
            }
            
            function moveNext() {
                if (isTransitioning) return;
                isTransitioning = true;
                currentIndex = (currentIndex + 1) % totalSlides;
                updateCarousel();
                setTimeout(() => { isTransitioning = false; }, 400);
            }
            
            function movePrev() {
                if (isTransitioning) return;
                isTransitioning = true;
                currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
                updateCarousel();
                setTimeout(() => { isTransitioning = false; }, 400);
            }
            
            nextButton.addEventListener('click', moveNext);
            prevButton.addEventListener('click', movePrev);
            
            updateCarousel();
            
            setTimeout(() => {
                const carouselWidth = carousel.offsetWidth || window.innerWidth;
                const newCardWidth = Math.min(carouselWidth * 0.75, 800);
                originalSlides.forEach((card) => {
                    card.style.width = newCardWidth + 'px';
                    card.style.marginLeft = (-newCardWidth / 2) + 'px';
                });
                updateCarousel();
            }, 100);
            
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    const carouselWidth = carousel.offsetWidth || window.innerWidth;
                    const newCardWidth = Math.min(carouselWidth * 0.75, 800);
                    originalSlides.forEach((card) => {
                        card.style.width = newCardWidth + 'px';
                        card.style.marginLeft = (-newCardWidth / 2) + 'px';
                    });
                    updateCarousel();
                }, 250);
            });
        }
    </script>
    <script>
        // Scroll animation observer with reset
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };
    
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                } else {
                    entry.target.classList.remove('is-visible');  // Reset when scrolling out
                }
            });
        }, observerOptions);
    
        // Wait for DOM to be ready, then observe elements
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</body>
</html>